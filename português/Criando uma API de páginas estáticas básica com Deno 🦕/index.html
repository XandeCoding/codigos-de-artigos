
<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Construindo%20uma%20API%20organizadinha%20em%20Golang%20usando%20Fiber/">
      
      
        <link rel="next" href="../Docker%20Compose%20-%20MariaDB/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Criando uma API de p√°ginas est√°ticas b√°sica com Deno ü¶ï - Meus Textos</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#criando-uma-api-de-paginas-estaticas-basica-com-deno" class="md-skip">
          Pular para conte√∫do
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabe√ßalho">
    <a href="../.." title="Meus Textos" class="md-header__button md-logo" aria-label="Meus Textos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Meus Textos
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Criando uma API de p√°ginas est√°ticas b√°sica com Deno ü¶ï
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Selecione o idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/portugu√™s" hreflang="pt-BR" class="md-select__link">
              Portuguese
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/english" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Buscar" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Pesquisar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpar" aria-label="Limpar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando busca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navega√ß√£o" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Meus Textos" class="md-nav__button md-logo" aria-label="Meus Textos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Meus Textos
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    English
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            English
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../english/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Article Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../english/Docker%20Compose%20-%20FTP%20Server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Compose - FTP Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../english/Docker%20Compose%20-%20MariaDB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Compose - MariaDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../english/How%20to%20Install%20Applications%20Using%20Snap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to Install Applications Using Snap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../english/Spinning%20Up%20PostgreSQL%20with%20Docker%20Compose%20%2B%20Dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spinning Up PostgreSQL with Docker Compose + Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Portugu√™s
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Portugu√™s
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C√≥digos de Artigos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Como%20instalar%20pacotes%20Snap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Como instalar pacotes Snap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Construindo%20uma%20API%20organizadinha%20em%20Golang%20usando%20Fiber/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Construindo uma API organizadinha em Golang usando Fiber
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Criando uma API de p√°ginas est√°ticas b√°sica com Deno ü¶ï
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Criando uma API de p√°ginas est√°ticas b√°sica com Deno ü¶ï
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="√çndice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      √çndice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ideia-inicial" class="md-nav__link">
    <span class="md-ellipsis">
      Ideia inicial
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ideia inicial">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#e-a-aventura-se-inicia" class="md-nav__link">
    <span class="md-ellipsis">
      E a aventura se inicia
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#e-a-aventura-estava-ficando-sem-fim" class="md-nav__link">
    <span class="md-ellipsis">
      E a aventura estava ficando sem fim
    </span>
  </a>
  
    <nav class="md-nav" aria-label="E a aventura estava ficando sem fim">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#executando" class="md-nav__link">
    <span class="md-ellipsis">
      Executando
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#depois-de-20-mil-leguas-submarinas" class="md-nav__link">
    <span class="md-ellipsis">
      Depois de 20 mil l√©guas submarinas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker%20Compose%20-%20MariaDB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Compose - MariaDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker%20Compose%20-%20Servidor%20FTP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Compose - Servidor FTP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Documenta%C3%A7%C3%A3o%20Autom%C3%A1tica%20usando%20MkDocs%20e%20Python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documenta√ß√£o Autom√°tica usando MkDocs e Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rodando%20PostgreSQL%20com%20Docker%20Compose%20%2B%20Dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rodando PostgreSQL com Docker Compose + Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Usando%20DDD%20com%20FastAPI%20e%20subaplica%C3%A7%C3%B5es/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usando DDD com FastAPI e subaplica√ß√µes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%F0%9F%A5%96%20Bun%20e%20Node%20%E2%80%93%20Ser%C3%A1%20que%20o%20p%C3%A3ozinho%20tem%20chance%3F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ü•ñ Bun e Node ‚Äì Ser√° que o p√£ozinho tem chance?
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="√çndice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      √çndice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ideia-inicial" class="md-nav__link">
    <span class="md-ellipsis">
      Ideia inicial
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ideia inicial">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#e-a-aventura-se-inicia" class="md-nav__link">
    <span class="md-ellipsis">
      E a aventura se inicia
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#e-a-aventura-estava-ficando-sem-fim" class="md-nav__link">
    <span class="md-ellipsis">
      E a aventura estava ficando sem fim
    </span>
  </a>
  
    <nav class="md-nav" aria-label="E a aventura estava ficando sem fim">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#executando" class="md-nav__link">
    <span class="md-ellipsis">
      Executando
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#depois-de-20-mil-leguas-submarinas" class="md-nav__link">
    <span class="md-ellipsis">
      Depois de 20 mil l√©guas submarinas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="criando-uma-api-de-paginas-estaticas-basica-com-deno">Criando uma API de p√°ginas est√°ticas b√°sica com Deno ü¶ï</h1>
<p>Bom dia! meus caros compatriotas mineradores das profundezas do StackOverflow, esses √∫ltimos dias me veio uma vontade de como bom goiano dar uma sofrida e ao inv√©s de botar Maril√≠a Mendon√ßa preferi mexer com o famoso (ainda √©?) Deno que para minha grata supresa n√£o foi sofrimento nenhum! :laughing:</p>
<p>Porque minha surpresa? Primeiro o ecossistema √© bem simplista e receptivo para novos usu√°rios a toolkit que vem instalada trazem ferramentas como <code>deno fmt</code> que formata o c√≥digo de forma autom√°tica e um <code>deno lint</code> que achei sensacional fora que consegui configurar o debug no vscode tranquilamente, outro ponto que gostei bastante foi a standard library ser bem completa e vir com uma tipagem bem rica (sim sou um type junky).</p>
<p>Claro que h√° outros pontos que s√£o os principais diferencias para o seu irm√£o mais velho Node, mas n√£o vamos focar nas rusgas de fam√≠lia se quiser dar uma olhada a p√°gina inicial <a href="https://deno.land/">deno.land</a> cita alguns outros pontos legais.</p>
<h2 id="ideia-inicial">Ideia inicial</h2>
<p>Bem como objeto de estudo fiz uma API bem simples para testar algumas coisas como a integra√ß√£o do TypeScript com arquivos JSX que √© algo que eu li na documenta√ß√£o do Deno e curti bastante, ent√£o tive a ideia de fazer algo s√≥ para servir p√°ginas est√°ticas e ponto:thumbsup:, √∫nico diferencial aqui √© que usei o m√°ximo poss√≠vel da standard library.</p>
<p><em><strong>Disclaimer:</strong></em> Olha a ideia n√£o √© ser perfeito inclusive se tiverem erros por favor me avise :rolling_on_the_floor_laughing: mas tentei deixar o escopo bem fechado porque se n√£o nunca iria terminar o que tinha proposto para mim mesmo e fiquei feliz com o resultado, tinha como fazer mais algumas coisas legais mas √© aquilo quem n√£o faz deploy de bug em produ√ß√£o n√£o se diverte!. (Sim √© s√≥ uma piada, caso esteja se perguntando)</p>
<h3 id="e-a-aventura-se-inicia">E a aventura se inicia</h3>
<p>De in√≠cio foi bem simples de instalar inclusive foi s√≥ um comando que baixava j√° um script de instala√ß√£o e j√° o executava e pronto j√° estava com o deno instalado fiz alguns testes e depois configurei para usar o <a href="https://asdf-vm.com/">asdf</a> o que n√£o √© necess√°rio mas eu gosto da ferramenta pela possibilidade de versionar a runtime e pronto com tudo configurado comecei a programar.</p>
<p>E come√ßar a botar a m√£o na massa foi algo bem simples, por assim dizer, n√£o √© necess√°rio dar um init para rodar basta dar um <code>deno run</code> e se tiver algo que ele precise instalar ele baixa na hora da execu√ß√£o e adiciona as informa√ß√µes da vers√£o em um <em>package-lock.json</em> algo bem semelhante ao que acontece no Node.js, mas de forma mais minimalista, por assim dizer j√° que n√£o √© necess√°rio ter um <em>package.json</em> para interagirmos e configurarmos, algo que achei ruim disso √© que para o meu caso tive que criar um <em>makefile</em> para agilizar um pouco a execu√ß√£o vamos falar disso mais √† frente.</p>
<p>Olha aqui eu vou aos pouquinhos e vou explicar alguns detalhes de TypeScript para quem n√£o est√° muito familiarizado n√£o se perder.</p>
<p><img alt="Imagem com o import e uma interface sendo declarada" src="https://github.com/XandeCoding/codigos-de-artigos/blob/main/deno/site_server_side/doc_images/import-type-http.png?raw=true" /></p>
<p>Bem aqui j√° come√ßam as diferen√ßas Deno usa um esquema de import de libs externas via url, isso traz uma coisa √≥tima que √© a possibilidade de usar arquivos independentes da onde estejam da internet se √© poss√≠vel fazer o download ele funciona.</p>
<p>Neste caso estou importando e j√° retirando somente a fun√ß√£o de serve que vamos usar para iniciar o servidor.</p>
<p>Abaixo temos um tipo que explicita qual vai ser o "formato" de um objeto de rota, se pararmos para pensar o m√≠nimo que precisamos para criar uma rota (endpoint para os mais √≠ntimos) √© ter uma a√ß√£o e ter o "caminho" para essa a√ß√£o ser executada, por exemplo o caminho pode ser um '/index' e a a√ß√£o √© entregar um simples HTML.</p>
<p>Criei isso para facilitar para quem for criar uma rota no futuro n√£o ter que adivinhar ou ter que dar uma de detetive para descobrir os dados necess√°rios para uma rota funcional ser criada.</p>
<p>Basicamente esse <em><strong>k</strong></em> se refere a chave do objeto e que deve ser string, e essa mesma chave vai receber como valor uma Promise que retorna uma inst√¢ncia de response. Tabom ficou meio confuso mas basicamente eu vou ter um objeto JSON que s√≥ recebe chaves em texto como letras e frases e elas v√£o ter como valor uma fun√ß√£o ass√≠ncrona que retorna a resposta para o cliente, isso vai ficar mais claro mais a frente.</p>
<p>Agora vamos fazer o core da nossa aplica√ß√£o que √© o que vai receber as chamadas e encaminhar para as rotas certas.</p>
<p><img alt="Classe http server" src="https://github.com/XandeCoding/codigos-de-artigos/blob/main/deno/site_server_side/doc_images/http-server.png?raw=true" /></p>
<p>Bem vou me aprofundar mais na fun√ß√£o <em>initServerHandler</em> nela eu filtro os m√©todos como vou somente servir p√°ginas est√°ticas quero receber somente chamadas do tipo 'GET', depois eu crio uma url isso √© legal para poder pegar o pathname que o caminho, por exemplo, se eu colocar no meu navegador o endere√ßo <em>https://localhost:7000/teste</em> o pathname √© <em>/teste</em> isso √© uma abordagem bem simplista, mas para nosso caso serve muito bem.</p>
<p>Lembra da nossa declara√ß√£o <em>IRoute</em> aqui que come√ßa a brincadeira vamos acessar de forma direta a rota e j√° vamos executar a fun√ß√£o que est√° salva nela, por exemplo, em um objeto como o abaixo:</p>
<pre><code class="language-js">
{

'/': async () =&gt;  new  Response('Hello World')

}

</code></pre>
<p>Ao entrar na chave '/' ele me traz a fun√ß√£o que mostra um <em>Hello World</em> bem bonito para o usu√°rio.</p>
<p>Agora mais abaixo temos a fun√ß√£o <strong>serve</strong> nela que a brincadeira j√° come√ßa a rolar, ela inicia a fun√ß√£o <em>initServerHandler</em> e faz um <em>bind</em>? O que seria esse tal de bind?</p>
<p>Bem para entendermos isso precisamos pensar em como essa fun√ß√£o vai ser executada, pois, essa fun√ß√£o ela vai ser entregue para o server, mas n√£o ir√° ser executada ali, mas quando ele receber uma requisi√ß√£o e isso ocorre dentro de outro escopo e n√£o na fun√ß√£o <strong><em>serve</em></strong>, e nessa altura como a fun√ß√£o vai achar a inst√¢ncia de HTTPServer com as rotas se ele √© somente uma fun√ß√£o que foi passada para outro escopo? Para isso usamos o bind ele insere a propriedade <strong>routes</strong> que foi colocada na classe no momento da cria√ß√£o da instancia√ß√£o do <em><strong>HTTPServer</strong></em> que criamos e a deixa acess√≠vel dentro dela quase como se ela fosse um "par√¢metro", mas √© acessada como uma propriedade da fun√ß√£o, por isso quando damos um <em>this.routes</em> conseguimos acessar as rotas, ele acessa a propriedade routes da fun√ß√£o e n√£o da classe <strong>HTTPServer</strong>.</p>
<h3 id="e-a-aventura-estava-ficando-sem-fim">E a aventura estava ficando sem fim</h3>
<p>Essa brincadeira estava at√© bem divertida, mas eu j√° tinha tido ido o suficiente adentro da toca do coelho e estava satisfeito (Mundo de Alice vibes :leaves:). Ent√£o fiz uma fun√ß√£o para renderizar HTML puro e arquivos JSX, bem arquivos HTML n√£o tem muito segredo ent√£o vamos dar uma olhada em como fazer isso usando JSX.</p>
<p>Algo que n√£o sabia era que Typescript estava dando suporte nativo para JSX isso significa que podemos com algumas configura√ß√µes importar estes arquivos e us√°-los para renderizar p√°ginas para nossos clientes.</p>
<p>Para isso precisamos fazer uma pequena configura√ß√£o no nosso arquivo <code>tsconfig.json</code> o meu ficou dessa forma.</p>
<p><img alt="Arquivo tsconfig.json" src="https://github.com/XandeCoding/codigos-de-artigos/blob/main/deno/site_server_side/doc_images/ts-config.png?raw=true" /></p>
<ul>
<li>
<p>O <a href="https://www.typescriptlang.org/tsconfig#jsx"><code>jsx</code></a> se refere a como o arquivo JSX vai ser constru√≠do ao ser importado, essa config <code>react-jsx</code> permite que usemos outra runtime, nesse caso estamos usando o Preact como vamos ver abaixo</p>
</li>
<li>
<p><a href="https://www.typescriptlang.org/tsconfig#jsxImportSource"><code>jsxImportSource</code></a> Essa propriedade em conjunto com a op√ß√£o acima define qual vai ser o m√≥dulo que vai ser usado para importar o JSX e construir o componente ao ser exportado.</p>
</li>
</ul>
<p>Agora temos a fun√ß√£o que importa o arquivo JSX de forma gen√©rica (n√£o queremos ter que criar uma fun√ß√£o para cada JSX que criemos n√£o √©?)</p>
<p><img alt="Fun√ß√£o que faz a renderiza√ß√£o do componente JSX" src="https://github.com/XandeCoding/codigos-de-artigos/blob/main/deno/site_server_side/doc_images/renderJSXTemplate.png?raw=true" /></p>
<p>N√£o vou me apegar muito os detalhes de import ou da tipagem dos tipos, pois isso n√£o √© a m√°gica (e j√° conversamos sobre esse <em>Record</em> mais acima tamb√©m). O que ela faz √© basicamente importar o arquivo e usar uma fun√ß√£o de render do Preact e aqui est√° a m√°gica.</p>
<ul>
<li>
<p>Primeiro importamos a lib <code>preact-render-to-string</code> do cdn skypack ele tem bastante libs j√° configuradas para rodar no Deno, muita coisa que roda no Node funciona no Deno, mas algumas precisam de altera√ß√£o principalmente as que fazem opera√ß√µes no disco, ent√£o j√° ter algo configurado facilita bastante.</p>
</li>
<li>
<p>Mas na fun√ß√£o n√≥s importamos o componente de forma ass√≠ncrona (legal n√©? JavaScript √†s vezes nos proporciona essas boas surpresas :the_horns:), quando esse arquivo √© importado a fun√ß√£o j√° passa por uma transforma√ß√£o usando o <em>Preact</em> que configuramos mais cedo e se torna um arquivo utiliz√°vel dentro do nosso c√≥digo, n√£o se esque√ßa que TypeScript transforma tudo em JavaScript antes de ser executado o JSX s√≥ passa por um processo um pouco diferente.</p>
</li>
</ul>
<p><img alt="Componente JSX" src="https://github.com/XandeCoding/codigos-de-artigos/blob/main/deno/site_server_side/doc_images/jsx.png?raw=true" /></p>
<ul>
<li>Este arquivo acima √© um componente que criei bem simples somente para demonstrar, veja que estou exportando ele como default isso ajuda na hora de importar na fun√ß√£o acima, pois j√° sei bem onde acessar o componente no m√≥dulo.</li>
</ul>
<p><img alt="JSX Template Handler" src="https://github.com/XandeCoding/codigos-de-artigos/blob/main/deno/site_server_side/doc_images/JSXTemplateHandler.png?raw=true" /></p>
<ul>
<li>
<p>Com essa fun√ß√£o de renderiza√ß√£o podemos j√° us√°-la no nosso handler e nele o arquivo √© renderizado e adicionado um headers e uma response v√°lida √© retornada (sim algumas coisas s√£o bem chatas quando n√£o se usa um framework :cry:)</p>
</li>
<li>
<p>E para utilizarmos este handler basta configurarmos a nossa rota, lembra do nosso HTTPServer vamos brincar com ele agora, mas n√£o tem muita emo√ß√£o (felizmente).</p>
</li>
</ul>
<p><img alt="Inicializa√ß√£o das rotas" src="https://github.com/XandeCoding/codigos-de-artigos/blob/main/deno/site_server_side/doc_images/main.png?raw=true" /></p>
<p>Se voc√™ tem uma mem√≥ria boa (ou somente rolou a p√°gina para cima ü§∑) vai lembrar da interface que o nosso <code>HTTPServer</code> recebe, basta mandar a rota e o <em>handler</em> que √© a fun√ß√£o que executa a a√ß√£o ao acessamos aquele endpoint e depois usarmos a fun√ß√£o <em>serve</em>.</p>
<h4 id="executando">Executando</h4>
<p>Para executar h√° um diferencial, Deno pede (insiste melhor dizendo) que voc√™ especifique as permiss√µes que a aplica√ß√£o dever√° ter no nosso caso, √© necess√°rio a de <em>net</em>, pois √© uma API web acho que est√° explicito o porque (ela precisa acessar a rede) e de <em>read</em> pois vamos ler alguns arquivos.</p>
<p>Um ponto interessante √© que se fossemos usar somente o import comum n√£o precisar√≠amos, pois o mesmo j√° estaria incluso na hora que rod√°ssemos a aplica√ß√£o, mas como os arquivos que cont√©m os componentes JSX s√£o importados de forma ass√≠ncrona sendo lidos em tempo de execu√ß√£o, ele precisa que demos permiss√£o, pois n√£o √© adicionado na hora que compilamos mas depois ou nunca depende se vamos acessar a rota que usa o componente.</p>
<p>Segue abaixo o c√≥digo para executar o brinquedo.</p>
<p><code>deno run --config tsconfig.json --allow-net --allow-read ./src/main.ts</code></p>
<h4 id="depois-de-20-mil-leguas-submarinas">Depois de 20 mil l√©guas submarinas</h4>
<p>Chegamos ao final espero que n√£o tenha sido uma viagem para o mundo da Chatol√¢ndia a leitura desse texto, mas sim uma olhada pelo retrovisor ap√≥s o hype do Deno passar de seu ecossistema e de algumas diferen√ßas do seu irm√£o mais velho Node.js. üëãüëãüëã</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.result.more.one": "mais 1 nesta p\u00e1gina", "search.result.more.other": "# mais nesta p\u00e1gina", "search.result.none": "Nenhum documento encontrado", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version": "Selecione a vers\u00e3o"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>